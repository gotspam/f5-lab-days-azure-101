
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.1.6. Task – Deploy a new F5 BIG-IP VE in Azure &#8212; F5 Lab Days - Azure  documentation</title>
    
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5_agility_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.2. Module 2 – Deploy an F5 Web Application Firewall Using the Azure Security Center" href="../module2/module2.html" />
    <link rel="prev" title="2.1.1. Task – Setup basic cloud components in Azure" href="lab1.html" />
<!--
# Copyright 2017 F5 Networks
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
-->
<link href="https://cdn.f5.com/favicon.ico" rel="icon">
<script src="https://use.fontawesome.com/21fb8a09c3.js"></script>
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>
  <body>
  <nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="row corp-header">
      <div class="container corp-header">
        <div class="container corp-menu">
          <ul>
            <li><a href="https://f5.com" class="internalLink">F5.com</a></li>
            <li><a href="https://support.f5.com">Support</a></li>
            <li><a href="https://devcentral.f5.com">Community</a></li>
            <li><a href="https://github.com/F5Networks">GitHub</a></li>
            <li><a href="https://f5.com/about-us/careers">Careers</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row pageHeader">
      <div class="container stat">
        <div class="col-xs-12 stat">
          <a class="internalLink" href="https://f5.com">
            <img class="logo" src="https://cdn.f5.com/websites/support/assets/images/logo.svg" width="50" height="44" alt="F5 Networks" title="F5 Networks" border="0">
          </a>
            <ul id="MainMenu" class="main-menu">
              <li>
                <a href="#">Products
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ProductsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Connectors</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/products/connectors/marathon-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon BIG-IP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/marathon-asp-ctlr/latest" data-link-type="Nav: Mega">F5 Marathon ASP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/k8s-bigip-ctlr/latest" data-link-type="Nav: Mega">F5 Kubernetes BIG-IP Controller</a></li>
                          <li><a href="http://clouddocs.f5.com/products/connectors/f5-kube-proxy/latest" data-link-type="Nav: Mega">F5 Kubernetes Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/products/connectors">See all </a></--span-->
                      </li>
                      <li class="divider"></li>
                      <li class="third"><span class="a-mm-h">Application Service Proxy</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/products/asp/latest" data-link-type="Nav: Mega">F5 Application Service Proxy</a></li>
                        </ul>
                        <!--span class="seemore"><a href="/products/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Container Integrations
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="ContainersSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Container Integrations</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/containers/latest/marathon/" data-link-type="Nav: Mega">Mesos Marathon</a></li>
                          <li><a href="http://clouddocs.f5.com/containers/latest/kubernetes/" data-link-type="Nav: Mega">Kubernetes</a></li>
                          <li><a href="http://clouddocs.f5.com/containers/latest/openshift/" data-link-type="Nav: Mega">RedHat OpenShift</a></li>
                        </ul>
                        <span class="seemore"><a data-link-type="Nav: Mega" href="http://clouddocs.f5.com/containers/latest">View details </a></span>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Clouds
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>

                <div class="menu-panel soft-hide" id="CloudsSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third"><span class="a-mm-h">Cloud Integrations</span>
                        <ul>
                          <li><a href="http://clouddocs.f5.com/cloud/openstack/" data-link-type="Nav: Mega">OpenStack</a></li>
                        </ul>
                        <!--span class="seemore"><a data-link-type="Nav: Mega" href="/cloud/">See all </a></span-->
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
              <li>
                <a href="#">Resources
                  <span class="indicator"><span class="arrow-up"></span></span>
                </a>
                <div class="menu-panel soft-hide" id="UPCProgramSubmenu">
                  <div class="container">
                    <ul class="submenu col-sm-11">
                      <li class="third">
                        <span class="a-mm-h">Downloads</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://hub.docker.com/r/f5networks/" class="internalLink">Docker Hub</a></li>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://store.docker.com/images/f5networks" class="internalLink">Docker Store</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <span class="a-mm-h">OpenSource</span>
                        <ul>
                          <li><a target="_blank" data-link-type="Nav: Mega" href="https://github.com/F5Networks" class="internalLink">GitHub</a></li>
                        </ul>
                      </li>
                      <li class="divider"></li>

                      <li class="third">
                        <a href="//university.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega">F5 University</a>
                        <ul>
                          <li>
                            <p>Get up to speed with free self-paced courses</p>
                          </li>
                        </ul>
                        <a data-ng-href="https://devcentral.f5.com" class="a-mm-h internalLink" target="_blank" data-link-type="Nav: Mega" href="https://devcentral.f5.com">DevCentral</a>
                        <ul>
                          <li>
                            <p>Join the community of 250,000+ technical peers</p>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
            </ul>
        </div>
      </div>
    </div>
  </div> <!-- /container-fluid -->
</nav>

  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-3 sidebar">
         <h4><a href="../../">F5 Lab Days - Azure </a></h4>
<div id="searchbox" style="display: none" role="search">
  <form class="search" action="../../search.html" method="get">
    <div>
      <input type="text" name="q" placeholder="Search" style="padding-left: 6px;"/>
      <!-- <input type="submit" value="Go" style="margin-top: 4px;"/> -->
      <button type="submit" class="btn btn-primary btn-xs">Go</button>
    </div>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <p class="caption">
   <span class="caption-text">Current Page</span>
  </p>
  <ul>
<li><a class="reference internal" href="#">2.1.6. Task – Deploy a new F5 BIG-IP VE in Azure</a></li>
<li><a class="reference internal" href="#task-allow-management-and-http-access-to-the-big-ip">2.1.7. Task – Allow management and HTTP access to the BIG-IP</a></li>
<li><a class="reference internal" href="#task-allow-internet-access-to-wordpress-through-the-big-ip">2.1.8. Task – Allow Internet access to WordPress through the BIG-IP</a></li>
</ul>


<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">1. Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class1.html">2. Class - F5 Lab Days - Azure</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="module1.html">2.1. Module – Deploy a Standalone F5 BIG-IP Application Delivery Controller in Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module2/module2.html">2.2. Module 2 – Deploy an F5 Web Application Firewall Using the Azure Security Center</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module3/module3.html">2.3. Module 3 – Deploy an F5 BIG-IP Active/Active HA Pair Using ARM Templates</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="lab1.html"
                        title="previous chapter">2.1.1. Task – Setup basic cloud components in Azure</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../module2/module2.html"
                        title="next chapter">2.2. Module 2 – Deploy an F5 Web Application Firewall Using the Azure Security Center</a></p>
        
      </div>
      <div class="col-md-offset-3 col-sm-offset-3 main">
        <h4>
          <a href="/">Community Training Classes &amp; Labs</a> &gt; <a href="../../index.html">F5 Lab Days - Azure</a>
          <span class="right"><a href="../../genindex.html">Index</a></span>
        </h4>
        
  <div class="section" id="task-deploy-a-new-f5-big-ip-ve-in-azure">
<h1>2.1.6. Task – Deploy a new F5 BIG-IP VE in Azure<a class="headerlink" href="#task-deploy-a-new-f5-big-ip-ve-in-azure" title="Permalink to this headline">¶</a></h1>
<ol class="arabic">
<li><p class="first">Log into the portal – <a class="reference external" href="https://portal.azure.com">https://portal.azure.com</a> using the student## account assigned.</p>
<a class="reference internal image-reference" href="../../_images/image008.png"><img alt="../../_images/image008.png" src="../../_images/image008.png" style="height: 50px;" /></a>
</li>
<li><p class="first">Click the green <strong>+</strong> sign at the top left corner of the screen</p>
</li>
<li><p class="first">Search the marketplace by typing ‘F5 Better’ in the search field and hit <strong>Enter</strong>.
Take your time to view the different F5 products available.</p>
</li>
<li><p class="first">Click <strong>F5 BIG-IP ADC BETTER – BYOL</strong></p>
<a class="reference internal image-reference" href="../../_images/image9.png"><img alt="../../_images/image9.png" src="../../_images/image9.png" style="height: 50px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An appropriate license is delivered by your lab proctor. The proctor
will explain why you use <strong>BYOL</strong> in this lab.</p>
</div>
</li>
<li><p class="first">At the bottom of the next page, selected <strong>Resource Manager</strong> as the
deployment model</p>
</li>
<li><p class="first">Click <strong>Create</strong></p>
<p>You will now start the deployment process. Use the information provided
in Table 1.1 below to complete the “Create virtual machine” Basics page.</p>
<p>Table 1.1</p>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>BIG-IP Image</td>
<td>F5 BIG-IP ADC BETTER – BYOL</td>
</tr>
<tr class="row-odd"><td>Deployment Model</td>
<td>Resource Manager</td>
</tr>
<tr class="row-even"><td>Name</td>
<td>f5bigipuser&lt;student number&gt;bigip1</td>
</tr>
<tr class="row-odd"><td>VM disk type</td>
<td>SSD</td>
</tr>
<tr class="row-even"><td>User name</td>
<td>f5bigipuser&lt;student number&gt;</td>
</tr>
<tr class="row-odd"><td>Authentication Type</td>
<td>SSH public key</td>
</tr>
<tr class="row-even"><td>SSH public key</td>
<td>From Lab 1, Task 1</td>
</tr>
<tr class="row-odd"><td>Subscription</td>
<td>&lt;User Unique&gt;</td>
</tr>
<tr class="row-even"><td>Resource group</td>
<td>Create new</td>
</tr>
<tr class="row-odd"><td>Resource group name</td>
<td>f5bigipuser&lt;student number&gt;usergroup</td>
</tr>
<tr class="row-even"><td>Location</td>
<td>&lt;Closest Azure DC&gt;</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<a class="reference internal image-reference" href="../../_images/image11.png"><img alt="../../_images/image11.png" src="../../_images/image11.png" style="height: 400px;" /></a>
</li>
<li><p class="first">Once done, click <strong>OK</strong></p>
<p>You now need to select the Virtual Machine disk type and image size.
Using the information in Table 1.2 complete the “Size” page.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For a complete list of compatible Azure instance sizes, refer to
the “BIG-IP Virtual Edition and Microsoft Azure: Setup” guide.</p>
</div>
<p>Table 1.2</p>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Disk Type</td>
<td>HDD</td>
</tr>
<tr class="row-odd"><td>Size</td>
<td>D2_V2 Standard</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Search <strong>D2</strong> from “Choose a size”</p>
</li>
<li><p class="first">Select <strong>D2_V2 Standard</strong></p>
<a class="reference internal image-reference" href="../../_images/image13.png"><img alt="../../_images/image13.png" src="../../_images/image13.png" style="height: 300px;" /></a>
</li>
<li><p class="first">Click <strong>Select</strong></p>
<p>In the “Settings” page, provide the remaining information required for
the BIG-IP deployment and associated resources. Using the information in
Table 1.3 to complete the “Settings” page.</p>
<p>Table 1.3</p>
<table border="1" class="docutils">
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Storage Type</td>
<td>HDD</td>
</tr>
<tr class="row-odd"><td>Use managed disks</td>
<td>No</td>
</tr>
<tr class="row-even"><td>Public Inbound ports</td>
<td>HTTPS</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Under Settings, change “Disk type” to <strong>HDD</strong> and “Use managed disk” to <strong>No</strong></p>
<p>Look around at the various configurable items but leave them unchanged.</p>
<a class="reference internal image-reference" href="../../_images/image14.png"><img alt="../../_images/image14.png" src="../../_images/image14.png" style="height: 300px;" /></a>
</li>
<li><p class="first">Once done, click <strong>OK</strong></p>
</li>
<li><p class="first">Review the “Summary” page and the purchase you are about to make</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the screenshot below:</p>
<ul class="last simple">
<li>Notice “Validation passed”</li>
<li>Notice the F5 license BYOL is <em>not</em> charged</li>
<li>Notice the VM where the BIG-IP VE will reside is charged</li>
</ul>
</div>
<a class="reference internal image-reference" href="../../_images/image15-top.png"><img alt="../../_images/image15-top.png" src="../../_images/image15-top.png" style="height: 300px;" /></a>
</li>
<li><p class="first">Supply your email and phone number for validation</p>
<a class="reference internal image-reference" href="../../_images/lab-instance-validation.png"><img alt="../../_images/lab-instance-validation.png" src="../../_images/lab-instance-validation.png" style="height: 200px;" /></a>
</li>
<li><p class="first">Click <strong>Create</strong></p>
</li>
</ol>
</div>
<div class="section" id="task-allow-management-and-http-access-to-the-big-ip">
<h1>2.1.7. Task – Allow management and HTTP access to the BIG-IP<a class="headerlink" href="#task-allow-management-and-http-access-to-the-big-ip" title="Permalink to this headline">¶</a></h1>
<p>In this task you will permit management access and HTTPS access to the
BIG-IP by modifying the Network Security Group “Inbound” network access
rule set.</p>
<ol class="arabic">
<li><p class="first">Go to <strong>Resource groups</strong></p>
<a class="reference internal image-reference" href="../../_images/image16.png"><img alt="../../_images/image16.png" src="../../_images/image16.png" style="height: 200px;" /></a>
</li>
<li><p class="first">Expand your Resource group and select the Network security group</p>
<a class="reference internal image-reference" href="../../_images/image17.png"><img alt="../../_images/image17.png" src="../../_images/image17.png" style="height: 300px;" /></a>
</li>
<li><p class="first">Review the existing ruleset. Notice that you only have an inbound
rule allowing SSH.</p>
<a class="reference internal image-reference" href="../../_images/image18.png"><img alt="../../_images/image18.png" src="../../_images/image18.png" style="height: 300px;" /></a>
<p>Now you will add rules to allow HTTPS for F5 BIG-IP management and
data plane by clicking on “Inbound security rules”
(to the left of the screen below).</p>
</li>
<li><p class="first">Click <strong>Inbound security rules</strong></p>
<a class="reference internal image-reference" href="../../_images/image19.png"><img alt="../../_images/image19.png" src="../../_images/image19.png" style="height: 200px;" /></a>
</li>
<li><p class="first">Click <strong>+ Add</strong></p>
<a class="reference internal image-reference" href="../../_images/image20.png"><img alt="../../_images/image20.png" src="../../_images/image20.png" style="width: 644.0px; height: 224.0px;" /></a>
<p>Using the information provided in Table 1.4, add a rule to allow F5
BIG-IP management traffic.</p>
<p>Table 1.4</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Source</td>
<td>Any</td>
</tr>
<tr class="row-odd"><td>Source Port</td>
<td>*</td>
</tr>
<tr class="row-even"><td>Destination</td>
<td>Any</td>
</tr>
<tr class="row-odd"><td>Destination Port</td>
<td>8443</td>
</tr>
<tr class="row-even"><td>Protocol</td>
<td>Any</td>
</tr>
<tr class="row-odd"><td>Action</td>
<td>Allow</td>
</tr>
<tr class="row-even"><td>Priority</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>Name</td>
<td>f5-allow-mgmt</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../../_images/image21.png"><img alt="../../_images/image21.png" src="../../_images/image21.png" style="width: 449.0px; height: 547.0px;" /></a>
</li>
<li><p class="first">Click <strong>OK</strong></p>
</li>
<li><p class="first">Repeat the previous step to add another rule using the information
provided in Table 1.5, this time allowing external HTTPS traffic via the
F5 BIG-IP.</p>
<p>Table 1.5</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Source</td>
<td>Any</td>
</tr>
<tr class="row-odd"><td>Source Port</td>
<td>*</td>
</tr>
<tr class="row-even"><td>Destination</td>
<td>Any</td>
</tr>
<tr class="row-odd"><td>Destination Port</td>
<td>443</td>
</tr>
<tr class="row-even"><td>Protocol</td>
<td>Any</td>
</tr>
<tr class="row-odd"><td>Action</td>
<td>Allow</td>
</tr>
<tr class="row-even"><td>Priority</td>
<td>101</td>
</tr>
<tr class="row-odd"><td>Name</td>
<td>f5-allow-external-https</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">When complete, verify the end results look as follows:</p>
<a class="reference internal image-reference" href="../../_images/image22.png"><img alt="../../_images/image22.png" src="../../_images/image22.png" style="width: 726.0px; height: 238.5px;" /></a>
</li>
<li><p class="first">Connect to the F5 GUI by going to https://&lt;F5-BIG-IP-public-IP&gt;:8443</p>
</li>
<li><p class="first">Accept the SSL certificate warning</p>
</li>
<li><p class="first">Log into the BIG-IP using the credentials configured in the previous steps</p>
<a class="reference internal image-reference" href="../../_images/image31.png"><img alt="../../_images/image31.png" src="../../_images/image31.png" style="width: 661.0px; height: 416.0px;" /></a>
</li>
<li><p class="first">Click <strong>Log in</strong></p>
</li>
<li><p class="first">Go to <strong>Resource groups</strong> and click on your resource group</p>
</li>
<li><p class="first">Select your WordPress “Public IP address”</p>
<a class="reference internal image-reference" href="../../_images/image38.png"><img alt="../../_images/image38.png" src="../../_images/image38.png" style="width: 717.5px; height: 349.0px;" /></a>
<a class="reference internal image-reference" href="../../_images/image39.png"><img alt="../../_images/image39.png" src="../../_images/image39.png" style="width: 733.0px; height: 236.0px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember the WordPress public IP address. This will be used in
subsequent steps.</p>
</div>
<p>Go ahead and test access to the WordPress public IP with SSH and HTTPS.</p>
</li>
<li><p class="first">Verify that https://&lt;WordPress-Public-IP&gt; displays the
Wordpress blog</p>
<ul class="simple">
<li>You may have to accept the security warning</li>
</ul>
<a class="reference internal image-reference" href="../../_images/image42.png"><img alt="../../_images/image42.png" src="../../_images/image42.png" style="width: 558.5px; height: 358.5px;" /></a>
<p>You now need to modify the Network security group to remove direct
inbound access to the WordPress application. Let’s go back to the
Microsoft Azure portal.</p>
</li>
<li><p class="first">Go to <strong>Resource groups</strong> and click on your resource group</p>
</li>
<li><p class="first">Select your WordPress Network security group</p>
<a class="reference internal image-reference" href="../../_images/image43.png"><img alt="../../_images/image43.png" src="../../_images/image43.png" style="width: 717.0px; height: 401.0px;" /></a>
</li>
<li><p class="first">Remove the HTTP and HTTPS inbound rules while leaving only SSH access</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will only allow web access to the WordPress blog via the F5 BIG-IP.</p>
</div>
<a class="reference internal image-reference" href="../../_images/image44.png"><img alt="../../_images/image44.png" src="../../_images/image44.png" style="width: 918.0px; height: 192.0px;" /></a>
</li>
<li><p class="first">Click on the <strong>…</strong> link at the far right side of the rule to be deleted</p>
<a class="reference internal image-reference" href="../../_images/image45.png"><img alt="../../_images/image45.png" src="../../_images/image45.png" style="width: 903.0px; height: 132.0px;" /></a>
</li>
<li><p class="first">Click <strong>Delete</strong></p>
</li>
<li><p class="first">Confirm the delete action when prompted by clicking <strong>Yes</strong></p>
</li>
<li><p class="first">Now it’s time to confirm web access has been restricted to WordPress.
Open a private browser window (not a normal window…choose <strong>private</strong>)</p>
</li>
<li><p class="first">Verify that https://&lt;WordPress-Public-IP&gt; and http://&lt;WordPress-Public-IP&gt;
do <em>NOT</em> display the WordPress blog</p>
<a class="reference internal image-reference" href="../../_images/image46.png"><img alt="../../_images/image46.png" src="../../_images/image46.png" style="width: 770.0px; height: 495.0px;" /></a>
</li>
</ol>
</div>
<div class="section" id="task-allow-internet-access-to-wordpress-through-the-big-ip">
<h1>2.1.8. Task – Allow Internet access to WordPress through the BIG-IP<a class="headerlink" href="#task-allow-internet-access-to-wordpress-through-the-big-ip" title="Permalink to this headline">¶</a></h1>
<p>In this task you will configure the BIG-IP with a Virtual Server and
Pool to allow inbound Internet access to the WordPress application. First we
need to identify the private IP address for the WordPress instance. Let’s go
back to the Microsoft Azure Portal.</p>
<ol class="arabic">
<li><p class="first">Select your WordPress Network Interface</p>
<a class="reference internal image-reference" href="../../_images/image47.png"><img alt="../../_images/image47.png" src="../../_images/image47.png" style="width: 718.5px; height: 353.5px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember WordPress private IP address. This will be used in
subsequent steps.</p>
</div>
<a class="reference internal image-reference" href="../../_images/image48.png"><img alt="../../_images/image48.png" src="../../_images/image48.png" style="width: 741.0px; height: 239.0px;" /></a>
<p>This completes work in the Microsoft Azure Portal. You will now
configure the F5 BIG-IP.</p>
</li>
<li><p class="first">Connect to the BIG-IP using https://&lt;F5-public-IP&gt;:8443</p>
</li>
<li><p class="first">From the BIG-IP GUI, go to <strong>Local traffic -&gt; Pools -&gt; Pool List</strong> and
click on the <strong>+</strong> sign. Configure the pool using the information
provided in Table 1.8 below leaving all other fields set to defaults.</p>
<p>Table 1.8</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>wordpress_pool</td>
</tr>
<tr class="row-odd"><td>Health Montitor</td>
<td>HTTPS</td>
</tr>
<tr class="row-even"><td>Node Name</td>
<td>wordpress</td>
</tr>
<tr class="row-odd"><td>Address</td>
<td>&lt;your WordPress private IP address&gt;</td>
</tr>
<tr class="row-even"><td>Service Port</td>
<td>443</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../../_images/image49.png"><img alt="../../_images/image49.png" src="../../_images/image49.png" style="width: 892.0px; height: 688.0px;" /></a>
</li>
<li><p class="first">Click <strong>Finished</strong>. When configured correctly, the pool status will be green.</p>
<a class="reference internal image-reference" href="../../_images/image50.png"><img alt="../../_images/image50.png" src="../../_images/image50.png" style="width: 761.0px; height: 121.0px;" /></a>
<p>You now need to configure the Virtual server. To do this, you first need to
find the private IP of your F5 BIG-IP.</p>
</li>
<li><p class="first">From the BIG-IP GUI, go to <strong>Network -&gt; Self IPs</strong> and note the IP Address</p>
<a class="reference internal image-reference" href="../../_images/image51.png"><img alt="../../_images/image51.png" src="../../_images/image51.png" style="width: 1009.0px; height: 491.0px;" /></a>
</li>
<li><p class="first">Create a virtual server by going to
<strong>Local Traffic -&gt; Virtual Servers -&gt; Virtual Server List</strong> and click
on the <strong>+</strong> sign. Configure the Virtual Server using the information
provided in Table 1.9 below leaving all other fields set to defaults.</p>
<p>Table 1.9</p>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Name</td>
<td>vs_wordpress</td>
</tr>
<tr class="row-odd"><td>Destination Address</td>
<td>&lt;Self IP address of the BIG-IP&gt;</td>
</tr>
<tr class="row-even"><td>Service Port</td>
<td>443</td>
</tr>
<tr class="row-odd"><td>SSL Profile (Client)</td>
<td>clientssl</td>
</tr>
<tr class="row-even"><td>SSL Profile (Server)</td>
<td>serverssl</td>
</tr>
<tr class="row-odd"><td>Source Address Translation</td>
<td>Auto Map</td>
</tr>
<tr class="row-even"><td>Default Pool</td>
<td>wordpress_pool</td>
</tr>
</tbody>
</table>
<a class="reference internal image-reference" href="../../_images/image52.png"><img alt="../../_images/image52.png" src="../../_images/image52.png" style="width: 848.0px; height: 1078.0px;" /></a>
<a class="reference internal image-reference" href="../../_images/image53.png"><img alt="../../_images/image53.png" src="../../_images/image53.png" style="width: 655.0px; height: 514.5px;" /></a>
</li>
<li><p class="first">Click <strong>Finish</strong></p>
<p>You have now completed the BIG-IP configuration for the WordPress
application. To verify proper functionality, let’s browse the site and
verify F5 statistics.</p>
</li>
<li><p class="first">Open a browser to to https://&lt;F5-public-VIP-IP&gt; and ensure it
displays your WordPress blog.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As part of this task, you will see a certificate warning. You can
ignore this as in this lab you did not generate the server certificates.
In real life, you would ensure you have installed valid certificates.</p>
</div>
<a class="reference internal image-reference" href="../../_images/image54.png"><img alt="../../_images/image54.png" src="../../_images/image54.png" style="width: 597.0px; height: 416.5px;" /></a>
</li>
<li><p class="first">Now check the statistics of your virtual server to verify traffic flow,
by navigating to <strong>Statistics -&gt; Module Statistics -&gt; Local Traffic</strong></p>
</li>
<li><p class="first">Under <strong>Statistics Type</strong>, select <strong>Virtual Servers</strong></p>
<a class="reference internal image-reference" href="../../_images/image55.png"><img alt="../../_images/image55.png" src="../../_images/image55.png" style="width: 1225.0px; height: 388.0px;" /></a>
</li>
</ol>
</div>


        
		     <div class="row next-prev-btn-row">
           <div class="col-lg-12">
           
		        <a href="lab1.html" title="2.1.1. Task – Setup basic cloud components in Azure" accesskey="p" class="btn btn-primary pull-left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
           
           
              <a href="../module2/module2.html" title="2.2. Module 2 – Deploy an F5 Web Application Firewall Using the Azure Security Center" accesskey="n" class="btn btn-primary pull-right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
           
		     </div>
         </div>
        
      </div>
    </div>
  </div>


  <footer>
      <div class="container-fluid">
        <div class="row">
          <div class="content-fluid pre-footer">
            <div class="blocks-container">
              <div class="block">
                <h3>Support Programs</h3>
                <p>Regionally located support centers enable F5 to provide support in a number of languages through native-speaking support engineers.</p>
                <a class="btn internalLink" data-ng-href="https://f5.com/support/support-offerings" target="_blank" href="https://f5.com/support/support-offerings">See more
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Contact Support</h3>
                <p>
                  North America: 1-888-882-7535<br>
                  Outside North America: 800-11-275-435
                </p>
                <a class="btn internalLink" data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" href="https://f5.com/about-us/contact#regional-support">Local Support Numbers
                  <span class="icon-1x-right icon-new-window" data-icon="new-window">​</span>
                </a>
              </div>
              <div class="block">
                <h3>Feedback and Help</h3>
                <p>Have questions, suggestions, or just want to get something off your chest? Let us know.</p>
                <a class="btn" data-ui-sref="siteFeedback" target="_blank" href="https://support.f5.com/csp/siteFeedback">Leave feedback</a>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="footer">
            <div class="container">
              <div class="col-sm-3 col-md-2">
                <h4>About F5</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/about-us/contact" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact" class="internalLink">Contact F5</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/about-us/careers" target="_blank" data-link-type="footer" href="https://f5.com/about-us/careers" class="internalLink">Careers</a>
                  </li>
                </ul>
              </div>
              <div class="col-sm-3 col-md-2">
                <h4>Education</h4>
                <ul>
                  <li><a data-ng-href="https://f5.com/education/training" target="_blank" data-link-type="footer" href="https://f5.com/education/training" class="internalLink">Training</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/certification" target="_blank" data-link-type="footer" href="https://f5.com/education/certification" class="internalLink">Certification</a>
                  </li>
                  <li><a data-ng-href="https://f5.com/education/training/free-courses" target="_blank" data-link-type="footer" href="https://f5.com/education/training/free-courses" class="internalLink">Free Online Training</a>
                  </li>
                </ul>
              </div>

              <div class="col-sm-3 col-md-2">
                <h4>F5 sites</h4>
                <ul>
                <li><a data-ng-href="https://f5.com" target="_blank" data-link-type="footer" href="https://f5.com" class="internalLink">F5.com</a>
                </li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" data-link-type="footer" href="https://devcentral.f5.com" class="internalLink">Community</a>
                </li>
                <li><a data-ng-href="https://partners.f5.com" target="_blank" data-link-type="footer" href="https://partners.f5.com" class="internalLink">Partners</a>
                </li>
            </ul>
        </div>

        <div class="col-sm-3 col-md-2">
            <h4>Support Tasks</h4>
            <ul>
                <li><a data-ui-sref="mySupport.createServiceRequest" data-link-type="footer" href="https://support.f5.com/csp/my-support/service-request">Create Service Request </a>
                </li>
                <li><a data-ng-href="https://f5.com/about-us/contact#regional-support" target="_blank" data-link-type="footer" href="https://f5.com/about-us/contact#regional-support" class="internalLink">Contact Support</a>
                </li>
                <li><a data-ui-sref="siteFeedback" target="_blank" data-link-type="footer" href="https://support.f5.com/csp/siteFeedback">Leave feedback [+]</a>
                </li>
            </ul>
        </div>

        <div class="col-xs-12 col-md-3 right">
            <h4>Connect with us</h4>
            <ul class="social_icons">
                <li><a href="//twitter.com/f5networks" target="_blank" data-name="twitter" data-type="" data-prefix="social" data-utf="E032" title="Twitter" class="externalLink"><i class="icon-1x icon-twitter icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.linkedin.com/companies/f5-networks" target="_blank" class="linkedin externalLink" title="LinkedIn"><i class="icon-1x icon-linkedin icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.facebook.com/f5networksinc" target="_blank" class="facebook externalLink" title="Facebook"><i class="icon-1x icon-facebook icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a href="//www.youtube.com/f5networksinc" target="_blank" class="youtube externalLink" title="YouTube"><i class="icon-1x icon-youtube icon-inverse-circle" data-link-type="footer"></i></a></li>
                <li><a data-ng-href="https://devcentral.f5.com" target="_blank" class="devcentral internalLink" title="DevCentral" href="https://devcentral.f5.com"><i class="icon-1x icon-dc-pos icon-inverse-circle" data-link-type="footer"></i></a></li>
            </ul>
        </div>

        <div class="content-fluid left">
            <div class="col-xs-12">
                <p>
                    © Copyright <span class="ng-binding">2017</span> by F5 Networks, Inc. |
                    <a data-ng-href="https://f5.com/about-us/policies" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies" class="internalLink">Policies</a> |
                    <a data-ng-href="https://f5.com/about-us/policies/trademarks" target="_blank" data-link-type="footer" href="https://f5.com/about-us/policies/trademarks" class="internalLink">Trademarks</a>
                </p>
            </div>
        </div>
    </div>
</div>
    </div>
</div>
</footer>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    jQuery.noConflict(true)
  </script>
  </body>
</html>